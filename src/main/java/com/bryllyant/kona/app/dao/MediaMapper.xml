<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bryllyant.kona.app.dao.MediaMapper">
  <resultMap id="BaseResultMap" type="com.bryllyant.kona.app.entity.Media">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="uid" jdbcType="VARCHAR" property="uid" />
    <result column="parent_id" jdbcType="BIGINT" property="parentId" />
    <result column="user_id" jdbcType="BIGINT" property="userId" />
    <result column="account_id" jdbcType="BIGINT" property="accountId" />
    <result column="file_id" jdbcType="BIGINT" property="fileId" />
    <result column="thumbnail_id" jdbcType="BIGINT" property="thumbnailId" />
    <result column="folder_path" jdbcType="VARCHAR" property="folderPath" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="slug" jdbcType="VARCHAR" property="slug" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="url" jdbcType="VARCHAR" property="url" />
    <result column="url_path" jdbcType="VARCHAR" property="urlPath" />
    <result column="thumbnail_url" jdbcType="VARCHAR" property="thumbnailUrl" />
    <result column="thumbnail_url_path" jdbcType="VARCHAR" property="thumbnailUrlPath" />
    <result column="content_type" jdbcType="VARCHAR" property="contentType" />
    <result column="width" jdbcType="INTEGER" property="width" />
    <result column="height" jdbcType="INTEGER" property="height" />
    <result column="size" jdbcType="BIGINT" property="size" />
    <result column="bits_per_pixel" jdbcType="INTEGER" property="bitsPerPixel" />
    <result column="frames_per_second" jdbcType="INTEGER" property="framesPerSecond" />
    <result column="duration" jdbcType="BIGINT" property="duration" />
    <result column="thumbnail_width" jdbcType="INTEGER" property="thumbnailWidth" />
    <result column="thumbnail_height" jdbcType="INTEGER" property="thumbnailHeight" />
    <result column="thumbnail_size" jdbcType="BIGINT" property="thumbnailSize" />
    <result column="enabled" jdbcType="BIT" property="enabled" />
    <result column="resizeable" jdbcType="BIT" property="resizeable" />
    <result column="sprite" jdbcType="BIT" property="sprite" />
    <result column="sprite_x_offset" jdbcType="INTEGER" property="spriteXOffset" />
    <result column="sprite_y_offset" jdbcType="INTEGER" property="spriteYOffset" />
    <result column="latitude" jdbcType="DOUBLE" property="latitude" />
    <result column="longitude" jdbcType="DOUBLE" property="longitude" />
    <result column="created_date" jdbcType="TIMESTAMP" property="createdDate" />
    <result column="updated_date" jdbcType="TIMESTAMP" property="updatedDate" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    `id`, `uid`, `parent_id`, `user_id`, `account_id`, `file_id`, `thumbnail_id`, `folder_path`, 
    `name`, `slug`, `description`, `url`, `url_path`, `thumbnail_url`, `thumbnail_url_path`, 
    `content_type`, `width`, `height`, `size`, `bits_per_pixel`, `frames_per_second`, 
    `duration`, `thumbnail_width`, `thumbnail_height`, `thumbnail_size`, `enabled`, `resizeable`, 
    `sprite`, `sprite_x_offset`, `sprite_y_offset`, `latitude`, `longitude`, `created_date`, 
    `updated_date`
  </sql>
  <select id="selectByExample" parameterType="com.bryllyant.kona.app.entity.MediaExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from `kona__media`
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
    <if test="limit != null">
      limit ${limit}
    </if>
    <if test="offset != null">
      offset ${offset}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from `kona__media`
    where `id` = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    delete from `kona__media`
    where `id` = #{id,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByExample" parameterType="com.bryllyant.kona.app.entity.MediaExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    delete from `kona__media`
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.bryllyant.kona.app.entity.Media">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into `kona__media` (`uid`, `parent_id`, `user_id`, 
      `account_id`, `file_id`, `thumbnail_id`, 
      `folder_path`, `name`, `slug`, 
      `description`, `url`, `url_path`, 
      `thumbnail_url`, `thumbnail_url_path`, `content_type`, 
      `width`, `height`, `size`, 
      `bits_per_pixel`, `frames_per_second`, `duration`, 
      `thumbnail_width`, `thumbnail_height`, `thumbnail_size`, 
      `enabled`, `resizeable`, `sprite`, `sprite_x_offset`, 
      `sprite_y_offset`, `latitude`, `longitude`, 
      `created_date`, `updated_date`,coords)
values (#{uid,jdbcType=VARCHAR}, #{parentId,jdbcType=BIGINT}, #{userId,jdbcType=BIGINT}, 
      #{accountId,jdbcType=BIGINT}, #{fileId,jdbcType=BIGINT}, #{thumbnailId,jdbcType=BIGINT}, 
      #{folderPath,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{slug,jdbcType=VARCHAR}, 
      #{description,jdbcType=VARCHAR}, #{url,jdbcType=VARCHAR}, #{urlPath,jdbcType=VARCHAR}, 
      #{thumbnailUrl,jdbcType=VARCHAR}, #{thumbnailUrlPath,jdbcType=VARCHAR}, #{contentType,jdbcType=VARCHAR}, 
      #{width,jdbcType=INTEGER}, #{height,jdbcType=INTEGER}, #{size,jdbcType=BIGINT}, 
      #{bitsPerPixel,jdbcType=INTEGER}, #{framesPerSecond,jdbcType=INTEGER}, #{duration,jdbcType=BIGINT}, 
      #{thumbnailWidth,jdbcType=INTEGER}, #{thumbnailHeight,jdbcType=INTEGER}, #{thumbnailSize,jdbcType=BIGINT}, 
      #{enabled,jdbcType=BIT}, #{resizeable,jdbcType=BIT}, #{sprite,jdbcType=BIT}, #{spriteXOffset,jdbcType=INTEGER}, 
      #{spriteYOffset,jdbcType=INTEGER}, #{latitude,jdbcType=DOUBLE}, #{longitude,jdbcType=DOUBLE}, 
      #{createdDate,jdbcType=TIMESTAMP}, #{updatedDate,jdbcType=TIMESTAMP},ST_PointFromText(concat('POINT(',ifnull(longitude, 0),' ',ifnull(latitude, 0),')')))
</insert>
  <insert id="insertSelective" parameterType="com.bryllyant.kona.app.entity.Media">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into `kona__media`
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="uid != null">
        `uid`,
      </if>
      <if test="parentId != null">
        `parent_id`,
      </if>
      <if test="userId != null">
        `user_id`,
      </if>
      <if test="accountId != null">
        `account_id`,
      </if>
      <if test="fileId != null">
        `file_id`,
      </if>
      <if test="thumbnailId != null">
        `thumbnail_id`,
      </if>
      <if test="folderPath != null">
        `folder_path`,
      </if>
      <if test="name != null">
        `name`,
      </if>
      <if test="slug != null">
        `slug`,
      </if>
      <if test="description != null">
        `description`,
      </if>
      <if test="url != null">
        `url`,
      </if>
      <if test="urlPath != null">
        `url_path`,
      </if>
      <if test="thumbnailUrl != null">
        `thumbnail_url`,
      </if>
      <if test="thumbnailUrlPath != null">
        `thumbnail_url_path`,
      </if>
      <if test="contentType != null">
        `content_type`,
      </if>
      <if test="width != null">
        `width`,
      </if>
      <if test="height != null">
        `height`,
      </if>
      <if test="size != null">
        `size`,
      </if>
      <if test="bitsPerPixel != null">
        `bits_per_pixel`,
      </if>
      <if test="framesPerSecond != null">
        `frames_per_second`,
      </if>
      <if test="duration != null">
        `duration`,
      </if>
      <if test="thumbnailWidth != null">
        `thumbnail_width`,
      </if>
      <if test="thumbnailHeight != null">
        `thumbnail_height`,
      </if>
      <if test="thumbnailSize != null">
        `thumbnail_size`,
      </if>
      `enabled`,
      `resizeable`,
      `sprite`,
      <if test="spriteXOffset != null">
        `sprite_x_offset`,
      </if>
      <if test="spriteYOffset != null">
        `sprite_y_offset`,
      </if>
      <if test="latitude != null">
        `latitude`,
      </if>
      <if test="longitude != null">
        `longitude`,
      </if>
      <if test="createdDate != null">
        `created_date`,
      </if>
      <if test="updatedDate != null">
        `updated_date`,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="uid != null">
        #{uid,jdbcType=VARCHAR},
      </if>
      <if test="parentId != null">
        #{parentId,jdbcType=BIGINT},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=BIGINT},
      </if>
      <if test="accountId != null">
        #{accountId,jdbcType=BIGINT},
      </if>
      <if test="fileId != null">
        #{fileId,jdbcType=BIGINT},
      </if>
      <if test="thumbnailId != null">
        #{thumbnailId,jdbcType=BIGINT},
      </if>
      <if test="folderPath != null">
        #{folderPath,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="slug != null">
        #{slug,jdbcType=VARCHAR},
      </if>
      <if test="description != null">
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="url != null">
        #{url,jdbcType=VARCHAR},
      </if>
      <if test="urlPath != null">
        #{urlPath,jdbcType=VARCHAR},
      </if>
      <if test="thumbnailUrl != null">
        #{thumbnailUrl,jdbcType=VARCHAR},
      </if>
      <if test="thumbnailUrlPath != null">
        #{thumbnailUrlPath,jdbcType=VARCHAR},
      </if>
      <if test="contentType != null">
        #{contentType,jdbcType=VARCHAR},
      </if>
      <if test="width != null">
        #{width,jdbcType=INTEGER},
      </if>
      <if test="height != null">
        #{height,jdbcType=INTEGER},
      </if>
      <if test="size != null">
        #{size,jdbcType=BIGINT},
      </if>
      <if test="bitsPerPixel != null">
        #{bitsPerPixel,jdbcType=INTEGER},
      </if>
      <if test="framesPerSecond != null">
        #{framesPerSecond,jdbcType=INTEGER},
      </if>
      <if test="duration != null">
        #{duration,jdbcType=BIGINT},
      </if>
      <if test="thumbnailWidth != null">
        #{thumbnailWidth,jdbcType=INTEGER},
      </if>
      <if test="thumbnailHeight != null">
        #{thumbnailHeight,jdbcType=INTEGER},
      </if>
      <if test="thumbnailSize != null">
        #{thumbnailSize,jdbcType=BIGINT},
      </if>
      #{enabled,jdbcType=BIT},
      #{resizeable,jdbcType=BIT},
      #{sprite,jdbcType=BIT},
      <if test="spriteXOffset != null">
        #{spriteXOffset,jdbcType=INTEGER},
      </if>
      <if test="spriteYOffset != null">
        #{spriteYOffset,jdbcType=INTEGER},
      </if>
      <if test="latitude != null">
        #{latitude,jdbcType=DOUBLE},
      </if>
      <if test="longitude != null">
        #{longitude,jdbcType=DOUBLE},
      </if>
      <if test="createdDate != null">
        #{createdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedDate != null">
        #{updatedDate,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.bryllyant.kona.app.entity.MediaExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    select count(*) from `kona__media`
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    update `kona__media`
    <set>
      <if test="record.id != null">
        `id` = #{record.id,jdbcType=BIGINT},
      </if>
      <if test="record.uid != null">
        `uid` = #{record.uid,jdbcType=VARCHAR},
      </if>
      <if test="record.parentId != null">
        `parent_id` = #{record.parentId,jdbcType=BIGINT},
      </if>
      <if test="record.userId != null">
        `user_id` = #{record.userId,jdbcType=BIGINT},
      </if>
      <if test="record.accountId != null">
        `account_id` = #{record.accountId,jdbcType=BIGINT},
      </if>
      <if test="record.fileId != null">
        `file_id` = #{record.fileId,jdbcType=BIGINT},
      </if>
      <if test="record.thumbnailId != null">
        `thumbnail_id` = #{record.thumbnailId,jdbcType=BIGINT},
      </if>
      <if test="record.folderPath != null">
        `folder_path` = #{record.folderPath,jdbcType=VARCHAR},
      </if>
      <if test="record.name != null">
        `name` = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.slug != null">
        `slug` = #{record.slug,jdbcType=VARCHAR},
      </if>
      <if test="record.description != null">
        `description` = #{record.description,jdbcType=VARCHAR},
      </if>
      <if test="record.url != null">
        `url` = #{record.url,jdbcType=VARCHAR},
      </if>
      <if test="record.urlPath != null">
        `url_path` = #{record.urlPath,jdbcType=VARCHAR},
      </if>
      <if test="record.thumbnailUrl != null">
        `thumbnail_url` = #{record.thumbnailUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.thumbnailUrlPath != null">
        `thumbnail_url_path` = #{record.thumbnailUrlPath,jdbcType=VARCHAR},
      </if>
      <if test="record.contentType != null">
        `content_type` = #{record.contentType,jdbcType=VARCHAR},
      </if>
      <if test="record.width != null">
        `width` = #{record.width,jdbcType=INTEGER},
      </if>
      <if test="record.height != null">
        `height` = #{record.height,jdbcType=INTEGER},
      </if>
      <if test="record.size != null">
        `size` = #{record.size,jdbcType=BIGINT},
      </if>
      <if test="record.bitsPerPixel != null">
        `bits_per_pixel` = #{record.bitsPerPixel,jdbcType=INTEGER},
      </if>
      <if test="record.framesPerSecond != null">
        `frames_per_second` = #{record.framesPerSecond,jdbcType=INTEGER},
      </if>
      <if test="record.duration != null">
        `duration` = #{record.duration,jdbcType=BIGINT},
      </if>
      <if test="record.thumbnailWidth != null">
        `thumbnail_width` = #{record.thumbnailWidth,jdbcType=INTEGER},
      </if>
      <if test="record.thumbnailHeight != null">
        `thumbnail_height` = #{record.thumbnailHeight,jdbcType=INTEGER},
      </if>
      <if test="record.thumbnailSize != null">
        `thumbnail_size` = #{record.thumbnailSize,jdbcType=BIGINT},
      </if>
      <if test="record.enabled != null">
        `enabled` = #{record.enabled,jdbcType=BIT},
      </if>
      <if test="record.resizeable != null">
        `resizeable` = #{record.resizeable,jdbcType=BIT},
      </if>
      <if test="record.sprite != null">
        `sprite` = #{record.sprite,jdbcType=BIT},
      </if>
      <if test="record.spriteXOffset != null">
        `sprite_x_offset` = #{record.spriteXOffset,jdbcType=INTEGER},
      </if>
      <if test="record.spriteYOffset != null">
        `sprite_y_offset` = #{record.spriteYOffset,jdbcType=INTEGER},
      </if>
      <if test="record.latitude != null">
        `latitude` = #{record.latitude,jdbcType=DOUBLE},
      </if>
      <if test="record.longitude != null">
        `longitude` = #{record.longitude,jdbcType=DOUBLE},
      </if>
      <if test="record.createdDate != null">
        `created_date` = #{record.createdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updatedDate != null">
        `updated_date` = #{record.updatedDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    update `kona__media`
    set `id` = #{record.id,jdbcType=BIGINT},
      `uid` = #{record.uid,jdbcType=VARCHAR},
      `parent_id` = #{record.parentId,jdbcType=BIGINT},
      `user_id` = #{record.userId,jdbcType=BIGINT},
      `account_id` = #{record.accountId,jdbcType=BIGINT},
      `file_id` = #{record.fileId,jdbcType=BIGINT},
      `thumbnail_id` = #{record.thumbnailId,jdbcType=BIGINT},
      `folder_path` = #{record.folderPath,jdbcType=VARCHAR},
      `name` = #{record.name,jdbcType=VARCHAR},
      `slug` = #{record.slug,jdbcType=VARCHAR},
      `description` = #{record.description,jdbcType=VARCHAR},
      `url` = #{record.url,jdbcType=VARCHAR},
      `url_path` = #{record.urlPath,jdbcType=VARCHAR},
      `thumbnail_url` = #{record.thumbnailUrl,jdbcType=VARCHAR},
      `thumbnail_url_path` = #{record.thumbnailUrlPath,jdbcType=VARCHAR},
      `content_type` = #{record.contentType,jdbcType=VARCHAR},
      `width` = #{record.width,jdbcType=INTEGER},
      `height` = #{record.height,jdbcType=INTEGER},
      `size` = #{record.size,jdbcType=BIGINT},
      `bits_per_pixel` = #{record.bitsPerPixel,jdbcType=INTEGER},
      `frames_per_second` = #{record.framesPerSecond,jdbcType=INTEGER},
      `duration` = #{record.duration,jdbcType=BIGINT},
      `thumbnail_width` = #{record.thumbnailWidth,jdbcType=INTEGER},
      `thumbnail_height` = #{record.thumbnailHeight,jdbcType=INTEGER},
      `thumbnail_size` = #{record.thumbnailSize,jdbcType=BIGINT},
      `enabled` = #{record.enabled,jdbcType=BIT},
      `resizeable` = #{record.resizeable,jdbcType=BIT},
      `sprite` = #{record.sprite,jdbcType=BIT},
      `sprite_x_offset` = #{record.spriteXOffset,jdbcType=INTEGER},
      `sprite_y_offset` = #{record.spriteYOffset,jdbcType=INTEGER},
      `latitude` = #{record.latitude,jdbcType=DOUBLE},
      `longitude` = #{record.longitude,jdbcType=DOUBLE},
      `created_date` = #{record.createdDate,jdbcType=TIMESTAMP},
      `updated_date` = #{record.updatedDate,jdbcType=TIMESTAMP}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.bryllyant.kona.app.entity.Media">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    update `kona__media`
    <set>
      <if test="uid != null">
        `uid` = #{uid,jdbcType=VARCHAR},
      </if>
      <if test="parentId != null">
        `parent_id` = #{parentId,jdbcType=BIGINT},
      </if>
      <if test="userId != null">
        `user_id` = #{userId,jdbcType=BIGINT},
      </if>
      <if test="accountId != null">
        `account_id` = #{accountId,jdbcType=BIGINT},
      </if>
      <if test="fileId != null">
        `file_id` = #{fileId,jdbcType=BIGINT},
      </if>
      <if test="thumbnailId != null">
        `thumbnail_id` = #{thumbnailId,jdbcType=BIGINT},
      </if>
      <if test="folderPath != null">
        `folder_path` = #{folderPath,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        `name` = #{name,jdbcType=VARCHAR},
      </if>
      <if test="slug != null">
        `slug` = #{slug,jdbcType=VARCHAR},
      </if>
      <if test="description != null">
        `description` = #{description,jdbcType=VARCHAR},
      </if>
      <if test="url != null">
        `url` = #{url,jdbcType=VARCHAR},
      </if>
      <if test="urlPath != null">
        `url_path` = #{urlPath,jdbcType=VARCHAR},
      </if>
      <if test="thumbnailUrl != null">
        `thumbnail_url` = #{thumbnailUrl,jdbcType=VARCHAR},
      </if>
      <if test="thumbnailUrlPath != null">
        `thumbnail_url_path` = #{thumbnailUrlPath,jdbcType=VARCHAR},
      </if>
      <if test="contentType != null">
        `content_type` = #{contentType,jdbcType=VARCHAR},
      </if>
      <if test="width != null">
        `width` = #{width,jdbcType=INTEGER},
      </if>
      <if test="height != null">
        `height` = #{height,jdbcType=INTEGER},
      </if>
      <if test="size != null">
        `size` = #{size,jdbcType=BIGINT},
      </if>
      <if test="bitsPerPixel != null">
        `bits_per_pixel` = #{bitsPerPixel,jdbcType=INTEGER},
      </if>
      <if test="framesPerSecond != null">
        `frames_per_second` = #{framesPerSecond,jdbcType=INTEGER},
      </if>
      <if test="duration != null">
        `duration` = #{duration,jdbcType=BIGINT},
      </if>
      <if test="thumbnailWidth != null">
        `thumbnail_width` = #{thumbnailWidth,jdbcType=INTEGER},
      </if>
      <if test="thumbnailHeight != null">
        `thumbnail_height` = #{thumbnailHeight,jdbcType=INTEGER},
      </if>
      <if test="thumbnailSize != null">
        `thumbnail_size` = #{thumbnailSize,jdbcType=BIGINT},
      </if>
      <if test="enabled != null">
        `enabled` = #{enabled,jdbcType=BIT},
      </if>
      <if test="resizeable != null">
        `resizeable` = #{resizeable,jdbcType=BIT},
      </if>
      <if test="sprite != null">
        `sprite` = #{sprite,jdbcType=BIT},
      </if>
      <if test="spriteXOffset != null">
        `sprite_x_offset` = #{spriteXOffset,jdbcType=INTEGER},
      </if>
      <if test="spriteYOffset != null">
        `sprite_y_offset` = #{spriteYOffset,jdbcType=INTEGER},
      </if>
      <if test="latitude != null">
        `latitude` = #{latitude,jdbcType=DOUBLE},
      </if>
      <if test="longitude != null">
        `longitude` = #{longitude,jdbcType=DOUBLE},
      </if>
      <if test="createdDate != null">
        `created_date` = #{createdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedDate != null">
        `updated_date` = #{updatedDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    where `id` = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.bryllyant.kona.app.entity.Media">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:24:37 EST 2018.
    -->
    update `kona__media`
    set `uid` = #{uid,jdbcType=VARCHAR},
      `parent_id` = #{parentId,jdbcType=BIGINT},
      `user_id` = #{userId,jdbcType=BIGINT},
      `account_id` = #{accountId,jdbcType=BIGINT},
      `file_id` = #{fileId,jdbcType=BIGINT},
      `thumbnail_id` = #{thumbnailId,jdbcType=BIGINT},
      `folder_path` = #{folderPath,jdbcType=VARCHAR},
      `name` = #{name,jdbcType=VARCHAR},
      `slug` = #{slug,jdbcType=VARCHAR},
      `description` = #{description,jdbcType=VARCHAR},
      `url` = #{url,jdbcType=VARCHAR},
      `url_path` = #{urlPath,jdbcType=VARCHAR},
      `thumbnail_url` = #{thumbnailUrl,jdbcType=VARCHAR},
      `thumbnail_url_path` = #{thumbnailUrlPath,jdbcType=VARCHAR},
      `content_type` = #{contentType,jdbcType=VARCHAR},
      `width` = #{width,jdbcType=INTEGER},
      `height` = #{height,jdbcType=INTEGER},
      `size` = #{size,jdbcType=BIGINT},
      `bits_per_pixel` = #{bitsPerPixel,jdbcType=INTEGER},
      `frames_per_second` = #{framesPerSecond,jdbcType=INTEGER},
      `duration` = #{duration,jdbcType=BIGINT},
      `thumbnail_width` = #{thumbnailWidth,jdbcType=INTEGER},
      `thumbnail_height` = #{thumbnailHeight,jdbcType=INTEGER},
      `thumbnail_size` = #{thumbnailSize,jdbcType=BIGINT},
      `enabled` = #{enabled,jdbcType=BIT},
      `resizeable` = #{resizeable,jdbcType=BIT},
      `sprite` = #{sprite,jdbcType=BIT},
      `sprite_x_offset` = #{spriteXOffset,jdbcType=INTEGER},
      `sprite_y_offset` = #{spriteYOffset,jdbcType=INTEGER},
      `latitude` = #{latitude,jdbcType=DOUBLE},
      `longitude` = #{longitude,jdbcType=DOUBLE},
      `created_date` = #{createdDate,jdbcType=TIMESTAMP},
      `updated_date` = #{updatedDate,jdbcType=TIMESTAMP}
    where `id` = #{id,jdbcType=BIGINT}
  </update>




  <update id="updateCoords" parameterType="java.lang.Long">
    update kona__media
    set coords = ST_PointFromText(concat('POINT(',
    ifnull(longitude, 0),
    ' ',
    ifnull(latitude, 0),
    ')'))
    where id = #{objectId,jdbcType=BIGINT}
  </update>

  <select id="selectProximate" parameterType="map" resultMap="BaseResultMap">
    <!-- measured at 39 degrees lat (center of US) -->
    set @METERS_PER_LAT_DEGREE = 111015.45;
    set @METERS_PER_LNG_DEGREE = 86626.37;

    <!-- radius in meters -->
    set @EARTH_RADIUS = 6372797.560856;

    set @lat = #{latitude,jdbcType=DOUBLE};
    set @lon = #{longitude,jdbcType=DOUBLE};
    set @dist = #{radius,jdbcType=DOUBLE};

    set @rlat1 = @lat - (@dist / @METERS_PER_LAT_DEGREE);
    set @rlon1 = @lon - (@dist/abs(cos(radians(@lat)) *
    @METERS_PER_LAT_DEGREE));

    set @rlat2 = @lat + (@dist / @METERS_PER_LAT_DEGREE);
    set @rlon2 = @lon + (@dist / abs(cos(radians(@lat)) *
    @METERS_PER_LAT_DEGREE));


    <!-- Great circle distance calculation This function returns distance in
        KM CREATE FUNCTION slc (lat1 double, lon1 double, lat2 double, lon2 double)
        RETURNS double RETURN 6371 * acos(cos(radians(lat1)) * cos(radians(lat2))
        * cos(radians(lon2) - radians(lon1)) + sin(radians(lat1)) * sin(radians(lat2))); -->


    select
    <include refid="Base_Column_List" />
    , (@EARTH_RADIUS *
    acos(cos(radians(@lat)) *
    cos(radians(y(coords))) *
    cos(radians(x(coords)) - radians(@lon)) +
    sin(radians(@lat)) *
    sin(radians(y(coords))))) as distance

    from kona__media

    <!-- filter out bogus records -->
    where latitude is not null
    and longitude is not null
    and coords is not null

    <if test="objectIds != null">
      and id in
      <foreach close=")" collection="objectIds" index="index" item="objectId" open="(" separator=",">
        #{objectId}
      </foreach>
    </if>

    <if test="startDate != null">
      and created_date &gt; #{startDate,jdbcType=TIMESTAMP}
    </if>

    <if test="endDate != null">
      and created_date &lt; #{endDate,jdbcType=TIMESTAMP}
    </if>

    <!-- match within radius -->
    and st_within(coords,
    st_envelope(
    linestring(point(@rlon1, @rlat1), point(@rlon2, @rlat2))
    )
    )

    order by st_distance(point(@lon, @lat), coords)
  </select>


</mapper>